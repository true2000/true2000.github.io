<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script>
      TrelloPowerUp.initialize({
        'board-buttons': function(t, options){
          return [{
            icon: './images/icon.svg',
            text: 'Update List Names',
            callback: function(t){
              return t.lists('all')
              .then(function(lists){
                lists.forEach(function(list){
                  var total = list.cards.length;
                  var complete = list.cards.filter(card => card.badges.checkItemsChecked > 0).length;
                  list.name = "Total: "+total+"; Complete: "+complete;
                  t.set('board', 'shared', 'list'+list.id, list.name);
                });
              });
            }
          }];
        }
      });
    </script>
  </body>
</html>
